

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NetHack Learning Environment &mdash; BALROG 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=29a6c3e3"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iclbench" href="../api/modules.html" />
    <link rel="prev" title="MiniHack" href="minihack.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            BALROG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluation.html">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../evaluation.html#quickstart">‚ö° Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluation.html#evaluate-using-local-vllm-server">Evaluate using local vLLM server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluation.html#evaluate-using-api">Evaluate using API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluation.html#vlm-mode">üñºÔ∏è VLM mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluation.html#resume-an-evaluation">‚ñ∂Ô∏è Resume an evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluation.html#configuring-eval">‚öôÔ∏è Configuring Eval</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../agents.html">Agents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../agents.html#pre-built-agents">Pre-built agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agents.html#creating-custom-agents">ü§ñ Creating Custom Agents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../agents.html#simple-planning-agent">Simple Planning Agent</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributions.html">Contributions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environments</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="babyai.html">Baby AI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="babyai.html#babyai-text">BabyAI-Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="babyai.html#babyai-results">BabyAI Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="babyai.html#llm-results">LLM results</a></li>
<li class="toctree-l3"><a class="reference internal" href="babyai.html#vlm-results">VLM results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="babyai.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="crafter.html">Crafter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="crafter.html#crafter-results">Crafter Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="crafter.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="crafter.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="crafter.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="textworld.html">TextWorld</a><ul>
<li class="toctree-l2"><a class="reference internal" href="textworld.html#tasks">Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="textworld.html#treasure-hunter">Treasure Hunter</a></li>
<li class="toctree-l3"><a class="reference internal" href="textworld.html#the-cooking-game">The Cooking Game</a></li>
<li class="toctree-l3"><a class="reference internal" href="textworld.html#coin-collector">Coin Collector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="textworld.html#textworld-results">TextWorld Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="textworld.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="babaisai.html">Baba Is AI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="babaisai.html#baba-is-ai-language-wrapper">Baba Is AI Language Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="babaisai.html#baba-is-ai-results">Baba Is AI Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="babaisai.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="babaisai.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="babaisai.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="minihack.html">MiniHack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="minihack.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="minihack.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="minihack.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NetHack Learning Environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nethack-language-wrapper">NetHack Language Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#new-nethack-progression-system">New NetHack Progression System</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nethack-results">NetHack Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#observation">Observation</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">iclbench</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/iclbench.html">iclbench package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.agents.html">iclbench.agents package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.environments.html">iclbench.environments package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.prompt_builder.html">iclbench.prompt_builder package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#module-iclbench.client">iclbench.client module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.ClaudeWrapper"><code class="docutils literal notranslate"><span class="pre">ClaudeWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.GoogleGenerativeAIWrapper"><code class="docutils literal notranslate"><span class="pre">GoogleGenerativeAIWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.LLMClientWrapper"><code class="docutils literal notranslate"><span class="pre">LLMClientWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.LLMResponse"><code class="docutils literal notranslate"><span class="pre">LLMResponse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.OpenAIWrapper"><code class="docutils literal notranslate"><span class="pre">OpenAIWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.ReplicateWrapper"><code class="docutils literal notranslate"><span class="pre">ReplicateWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.create_llm_client"><code class="docutils literal notranslate"><span class="pre">create_llm_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.process_image_claude"><code class="docutils literal notranslate"><span class="pre">process_image_claude()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.client.process_image_openai"><code class="docutils literal notranslate"><span class="pre">process_image_openai()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#module-iclbench.dataset">iclbench.dataset module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.dataset.InContextDataset"><code class="docutils literal notranslate"><span class="pre">InContextDataset</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.dataset.choice_excluding"><code class="docutils literal notranslate"><span class="pre">choice_excluding()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.dataset.natural_sort_key"><code class="docutils literal notranslate"><span class="pre">natural_sort_key()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#module-iclbench.evaluator">iclbench.evaluator module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.evaluator.Evaluator"><code class="docutils literal notranslate"><span class="pre">Evaluator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#module-iclbench.utils">iclbench.utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.utils.load_secrets"><code class="docutils literal notranslate"><span class="pre">load_secrets()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.utils.setup_environment"><code class="docutils literal notranslate"><span class="pre">setup_environment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.utils.summarize_env_progressions"><code class="docutils literal notranslate"><span class="pre">summarize_env_progressions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/iclbench.html#iclbench.utils.wandb_save_artifact"><code class="docutils literal notranslate"><span class="pre">wandb_save_artifact()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/iclbench.html#module-iclbench">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BALROG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">NetHack Learning Environment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/envs/nle.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nethack-learning-environment">
<h1>NetHack Learning Environment<a class="headerlink" href="#nethack-learning-environment" title="Link to this heading">ÔÉÅ</a></h1>
<p>The NetHack Learning Environment (NLE) is a
scalable, procedurally generated, stochastic, rich, and challenging
environment designed to drive long-term research in RL on problems such
as exploration, planning, skill acquisition, and language-conditioned
RL. Built around the classic and highly complex terminal roguelike game
NetHack, NLE provides a complex and dynamic environment where agents
must navigate through procedurally generated dungeons, interact with
hundreds of entity types, and learn to overcome various challenges.</p>
<p>The goal of the player is to descend through procedurally generated
dungeon levels while killing monsters, solving puzzles, and gathering
better equipment in order to retrieve the Amulet of Yendor and finally
ascend back to the surface to win the game. NetHack is notoriously
challenging, even for human players. Mastering the game can take years
even with online resources like the NetHack Wiki. Success in NetHack
demands long-term strategic planning, as a winning game can involve
hundreds of thousands of steps, as well as short-term tactics to fight
hordes of monsters. Accurate credit assignment is also crucial to
understanding which actions contributed to success or failure. NetHack
has already been used extensively as a testbed for RL
agents;
tabula-rasa RL agents particularly struggle due to sparse reward,
complex credit assignment, extremely long-time-horizon, and high
stochasticity of the game. The current state-of-the-art agent still
remains a hand-coded symbolic policy.</p>
<section id="nethack-language-wrapper">
<h2>NetHack Language Wrapper<a class="headerlink" href="#nethack-language-wrapper" title="Link to this heading">ÔÉÅ</a></h2>
<p>The NetHack Language Wrapper is a tool designed to
interface with the NLE and MiniHack by translating non-language
observations into text-based representations. This wrapper, converts
various NLE observations such as <code class="docutils literal notranslate"><span class="pre">glyphs</span></code>, <code class="docutils literal notranslate"><span class="pre">blstats</span></code>, <code class="docutils literal notranslate"><span class="pre">tty_chars</span></code>,
<code class="docutils literal notranslate"><span class="pre">inv_letters</span></code>, <code class="docutils literal notranslate"><span class="pre">inv_strs</span></code>, and <code class="docutils literal notranslate"><span class="pre">tty_cursor</span></code> into readable text
equivalents. For example, it transforms the visual display of the game
environment into a textual description, including details about the
surroundings, inventory, and player statistics. The wrapper also
supports text-based actions, allowing users to interact with the
environment using commands like <code class="docutils literal notranslate"><span class="pre">wait</span></code>, <code class="docutils literal notranslate"><span class="pre">apply</span></code>, and <code class="docutils literal notranslate"><span class="pre">north</span></code>, which are
then converted into the discrete actions required by the NLE. This
functionality enables easier interaction with the NetHack environment,
particularly for language models.</p>
<p><img alt="NetHack progression by dungeon levelreached" src="../_images/dungeon_levels.png" /></p>
<p><img alt="NetHack progression by experiencelevel" src="../_images/experience_levels.png" /></p>
</section>
<section id="new-nethack-progression-system">
<h2>New NetHack Progression System<a class="headerlink" href="#new-nethack-progression-system" title="Link to this heading">ÔÉÅ</a></h2>
<p>NetHack features an in-game scoring system that rewards players for
actions such as killing monsters, identifying objects, eating food,
collecting gold and items, and ultimately ascending in the game.
However, we argue that this scoring system does not effectively capture
true game progression, as players can win the game with scores ranging
from a few hundred thousand to several million points. To address this
limitation, we developed a novel, data-informed progression metric using
a dataset of human-played NetHack games.
Specifically, we recorded the dungeon levels and experience levels
achieved in each game, as well as whether the game resulted in an
ascension. Utilizing these statistics, we constructed a data-centric
progression system where each data point represents the probability of a
human player winning the game after reaching a specific dungeon level or
experience level. The resulting progression curves are presented in
Figure <a class="reference internal" href="#NLE_progression"><span class="xref myst">[NLE_progression]</span></a>{reference-type=‚Äùref‚Äù
reference=‚ÄùNLE_progression‚Äù}. For practical purposes, we define Dungeon
Level 1 (Dlvl:1) and Experience Level 1 as representing 0% progression,
corresponding to the game‚Äôs starting point, and ascension as 100%
progression. The agent‚Äôs overall progress is thus determined by the
highest progression achieved between the dungeon level and experience
level attained.</p>
</section>
<section id="nethack-results">
<h2>NetHack Results<a class="headerlink" href="#nethack-results" title="Link to this heading">ÔÉÅ</a></h2>
<p>Standard errors are computed using 5 seeds.
o1-preview achieves the highest progression out of all the tested
models. However, it is still very far from making any significant
progression in the game. The best individual run was achieved by
Gemini-1.5-Pro vision-language mode, reaching dungeon level 3 and
experience level 4.</p>
</section>
<section id="llm-results">
<h2>LLM results<a class="headerlink" href="#llm-results" title="Link to this heading">ÔÉÅ</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Average Progress (%)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>o1-preview</p></td>
<td><p>1.57 ¬± 0.40</p></td>
</tr>
<tr class="row-odd"><td><p>gpt-4o</p></td>
<td><p>0.37 ¬± 0.37</p></td>
</tr>
<tr class="row-even"><td><p>o1-mini</p></td>
<td><p>0.36 ¬± 0.24</p></td>
</tr>
<tr class="row-odd"><td><p>llama-3.1-70B-it</p></td>
<td><p>0.35 ¬± 0.35</p></td>
</tr>
<tr class="row-even"><td><p>gemini-1.5-pro</p></td>
<td><p>0.31 ¬± 0.31</p></td>
</tr>
<tr class="row-odd"><td><p>gpt-4o-mini</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-even"><td><p>gemini-1.5-flash</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-odd"><td><p>llama-3.2-90B-it</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-even"><td><p>llama-3.2-11B-it</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="vlm-results">
<h2>VLM results<a class="headerlink" href="#vlm-results" title="Link to this heading">ÔÉÅ</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Average Progress (%)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gemini-1.5-pro</p></td>
<td><p>0.48 ¬± 0.48</p></td>
</tr>
<tr class="row-odd"><td><p>gpt-4o</p></td>
<td><p>0.37 ¬± 0.37</p></td>
</tr>
<tr class="row-even"><td><p>gpt-4o-mini</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-odd"><td><p>gemini-1.5-flash</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-even"><td><p>llama-3.2-11B-it</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-odd"><td><p>gemini-1.5-flash</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-even"><td><p>llama-3.2-90B-it</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
<tr class="row-odd"><td><p>llama-3.2-11B-it</p></td>
<td><p>0 ¬± 0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="observation">
<h2>Observation<a class="headerlink" href="#observation" title="Link to this heading">ÔÉÅ</a></h2>
<p>TODO</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="minihack.html" class="btn btn-neutral float-left" title="MiniHack" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../api/modules.html" class="btn btn-neutral float-right" title="iclbench" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, BALROG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>