

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agents &mdash; BALROG 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=29a6c3e3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributions" href="contributions.html" />
    <link rel="prev" title="Evaluation" href="evaluation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            BALROG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#quickstart">‚ö° Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#evaluate-using-local-vllm-server">Evaluate using local vLLM server</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#evaluate-using-api">Evaluate using API</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#vlm-mode">üñºÔ∏è VLM mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#resume-an-evaluation">‚ñ∂Ô∏è Resume an evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#configuring-eval">‚öôÔ∏è Configuring Eval</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Agents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-built-agents">Pre-built agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-custom-agents">ü§ñ Creating Custom Agents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-planning-agent">Simple Planning Agent</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributions.html">Contributions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="envs/babyai.html">Baby AI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="envs/babyai.html#babyai-text">BabyAI-Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/babyai.html#babyai-results">BabyAI Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="envs/babyai.html#llm-results">LLM results</a></li>
<li class="toctree-l3"><a class="reference internal" href="envs/babyai.html#vlm-results">VLM results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="envs/babyai.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs/crafter.html">Crafter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="envs/crafter.html#crafter-results">Crafter Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/crafter.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/crafter.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/crafter.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs/textworld.html">TextWorld</a><ul>
<li class="toctree-l2"><a class="reference internal" href="envs/textworld.html#tasks">Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="envs/textworld.html#treasure-hunter">Treasure Hunter</a></li>
<li class="toctree-l3"><a class="reference internal" href="envs/textworld.html#the-cooking-game">The Cooking Game</a></li>
<li class="toctree-l3"><a class="reference internal" href="envs/textworld.html#coin-collector">Coin Collector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="envs/textworld.html#textworld-results">TextWorld Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/textworld.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs/babaisai.html">Baba Is AI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="envs/babaisai.html#baba-is-ai-language-wrapper">Baba Is AI Language Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/babaisai.html#baba-is-ai-results">Baba Is AI Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/babaisai.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/babaisai.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/babaisai.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs/minihack.html">MiniHack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="envs/minihack.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/minihack.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/minihack.html#observations">Observations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs/nle.html">NetHack Learning Environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="envs/nle.html#nethack-language-wrapper">NetHack Language Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/nle.html#new-nethack-progression-system">New NetHack Progression System</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/nle.html#nethack-results">NetHack Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/nle.html#llm-results">LLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/nle.html#vlm-results">VLM results</a></li>
<li class="toctree-l2"><a class="reference internal" href="envs/nle.html#observation">Observation</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">iclbench</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/iclbench.html">iclbench package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.agents.html">iclbench.agents package</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.environments.html">iclbench.environments package</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.prompt_builder.html">iclbench.prompt_builder package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#module-iclbench.client">iclbench.client module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.ClaudeWrapper"><code class="docutils literal notranslate"><span class="pre">ClaudeWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.GoogleGenerativeAIWrapper"><code class="docutils literal notranslate"><span class="pre">GoogleGenerativeAIWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.LLMClientWrapper"><code class="docutils literal notranslate"><span class="pre">LLMClientWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.LLMResponse"><code class="docutils literal notranslate"><span class="pre">LLMResponse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.OpenAIWrapper"><code class="docutils literal notranslate"><span class="pre">OpenAIWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.ReplicateWrapper"><code class="docutils literal notranslate"><span class="pre">ReplicateWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.create_llm_client"><code class="docutils literal notranslate"><span class="pre">create_llm_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.process_image_claude"><code class="docutils literal notranslate"><span class="pre">process_image_claude()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.client.process_image_openai"><code class="docutils literal notranslate"><span class="pre">process_image_openai()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#module-iclbench.dataset">iclbench.dataset module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.dataset.InContextDataset"><code class="docutils literal notranslate"><span class="pre">InContextDataset</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.dataset.choice_excluding"><code class="docutils literal notranslate"><span class="pre">choice_excluding()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.dataset.natural_sort_key"><code class="docutils literal notranslate"><span class="pre">natural_sort_key()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#module-iclbench.evaluator">iclbench.evaluator module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.evaluator.Evaluator"><code class="docutils literal notranslate"><span class="pre">Evaluator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#module-iclbench.utils">iclbench.utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.utils.load_secrets"><code class="docutils literal notranslate"><span class="pre">load_secrets()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.utils.setup_environment"><code class="docutils literal notranslate"><span class="pre">setup_environment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.utils.summarize_env_progressions"><code class="docutils literal notranslate"><span class="pre">summarize_env_progressions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/iclbench.html#iclbench.utils.wandb_save_artifact"><code class="docutils literal notranslate"><span class="pre">wandb_save_artifact()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/iclbench.html#module-iclbench">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BALROG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Agents</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/agents.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="agents">
<h1>Agents<a class="headerlink" href="#agents" title="Link to this heading">ÔÉÅ</a></h1>
<p>In BALROG, agents are entities that typically wrap an LLM client. They are responsible for receiving observations and selecting actions. As such, agents are internally responsible for:</p>
<ol class="arabic simple">
<li><p>Maintaining Observation/Action Histories: Agents keep a record of past observations and actions to support context-aware decision-making.</p></li>
<li><p>Querying LLMs: Agents send observations to the LLM, receive responses, and use those responses to decide on actions.</p></li>
</ol>
<section id="pre-built-agents">
<h2>Pre-built agents<a class="headerlink" href="#pre-built-agents" title="Link to this heading">ÔÉÅ</a></h2>
<p>BALROG ships with several pre-built agents:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Agent Type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>naive</strong></p></td>
<td><p>Outputs actions based on the current action/observation history without any additional reasoning.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>icl</strong></p></td>
<td><p>Learns from past interactions by updating its memory with observations and actions, then generates an action based on these experiences.</p></td>
</tr>
<tr class="row-even"><td><p><strong>chain_of_thought</strong></p></td>
<td><p>Generates actions through step-by-step reasoning, providing a final action output.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>self_refine</strong></p></td>
<td><p>Generates an action, then iteratively refines it based on feedback until no further improvements are needed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="creating-custom-agents">
<h2>ü§ñ Creating Custom Agents<a class="headerlink" href="#creating-custom-agents" title="Link to this heading">ÔÉÅ</a></h2>
<p>The simple zero-shot agent in <code class="docutils literal notranslate"><span class="pre">naive.py</span></code> outputs only a single action with no extra reasoning, but this is often suboptimal. We may want the agent to analyze its situation, form and refine plans, interpret image observations, or handle history more effectively.</p>
<p>To build a custom agent, you‚Äôll mainly work with:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">balrog/agents/custom.py</span></code> -&gt; your custom agent file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">balrog/prompt_builder/history.py</span></code> -&gt; containing the history prompt builder, an helper class to deal with with observation/action history in prompts.</p></li>
</ol>
<p>You‚Äôre free to modify or create additional files, as long as they don‚Äôt interfere with evaluation, logging, or environment processes.</p>
<section id="simple-planning-agent">
<h3>Simple Planning Agent<a class="headerlink" href="#simple-planning-agent" title="Link to this heading">ÔÉÅ</a></h3>
<p>The following code demonstrates a custom planning agent that stores and follows a plan, updating it as needed. This agent uses the default history prompt builder.</p>
<p><code class="docutils literal notranslate"><span class="pre">custom.py</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">balrog.agents.base</span> <span class="kn">import</span> <span class="n">BaseAgent</span>
<span class="kn">import</span> <span class="nn">re</span>


<span class="k">class</span> <span class="nc">CustomAgent</span><span class="p">(</span><span class="n">BaseAgent</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_factory</span><span class="p">,</span> <span class="n">prompt_builder</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">client_factory</span><span class="p">,</span> <span class="n">prompt_builder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client_factory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plan</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">act</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obs</span><span class="p">,</span> <span class="n">prev_action</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prev_action</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prompt_builder</span><span class="o">.</span><span class="n">update_action</span><span class="p">(</span><span class="n">prev_action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prompt_builder</span><span class="o">.</span><span class="n">update_observation</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span>

        <span class="n">plan_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Current Plan:</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">plan</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan</span> <span class="k">else</span> <span class="s2">&quot;You have no plan yet.</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="n">planning_instructions</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Review the current plan above if present. Decide whether to continue with it or make changes.</span>
<span class="s2">If you make changes, provide the updated plan. Then, provide the next action to take. </span>
<span class="s2">You must output an action at every step.</span>
<span class="s2">Format your answer in the following way:</span>
<span class="s2">PLAN: &lt;your updated plan if changed, or &quot;No changes to the plan.&quot; if the current plan is good&gt;</span>
<span class="s2">ACTION: &lt;your next action&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prompt_builder</span><span class="o">.</span><span class="n">get_prompt</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">messages</span> <span class="ow">and</span> <span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
            <span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">plan_text</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">planning_instructions</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>

        <span class="c1"># Extract the plan and action from the LLM&#39;s response</span>
        <span class="n">plan</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_plan_and_action</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">completion</span><span class="p">)</span>

        <span class="c1"># Update the internal plan if it has changed</span>
        <span class="k">if</span> <span class="n">plan</span> <span class="o">!=</span> <span class="s2">&quot;No changes to the plan.&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plan</span> <span class="o">=</span> <span class="n">plan</span>

        <span class="c1"># Save the plan in the response.reasoning field and the action in response.completion</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="n">reasoning</span><span class="o">=</span><span class="n">plan</span><span class="p">,</span> <span class="n">completion</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">_extract_plan_and_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_text</span><span class="p">):</span>
        <span class="n">plan_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;PLAN:\s*(.*?)(?=\nACTION:|\Z)&quot;</span><span class="p">,</span> <span class="n">response_text</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>
        <span class="n">action_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;ACTION:\s*(.*)&quot;</span><span class="p">,</span> <span class="n">response_text</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>

        <span class="n">plan</span> <span class="o">=</span> <span class="n">plan_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">plan_match</span> <span class="k">else</span> <span class="s2">&quot;No changes to the plan.&quot;</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">action_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">action_match</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">plan</span><span class="p">,</span> <span class="n">action</span>
</pre></div>
</div>
<p>Experiment with this example or explore additional templates from repositories like <a class="reference external" href="https://github.com/langchain-ai/langgraph">LangGraph</a>. Feel free to contribute by opening a PR with your own reasoning templates.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="evaluation.html" class="btn btn-neutral float-left" title="Evaluation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contributions.html" class="btn btn-neutral float-right" title="Contributions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, BALROG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>